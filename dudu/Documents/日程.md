## 日程

### 返回数据格式简介

| 名称       | 简介                               | 备注                        |
|------------|------------------------------------|-----------------------------|
| id         |                                    |                             |
| creater_id | 创建者ID                           |                             |
| user_id    | 日程对应的用户ID（不一定是创建者） |                             |
| type       | 类型                               | 日程为1，提醒为2，纪念日为3 |
| name       | 日程标题                           |                             |
| comment    | 日程备注                           |                             |
| start_at   | 开始时间                           |                             |
| end_at     | 结束时间                           |                             |
| remind_at  | 提醒时间                           |                             |
| public     | 是否公开                           |                             |
| fullday    | 是否全天事件                       | 0为否1为是，默认为0         |

### 获取当前用户的所有日程

```
GET /schedule
```

返回：

```json
{
    "errcode": 0,
    "errmsg": "ok",
    "errdata": {
        "data": [
            {
                "id": 6,
                "name": "喵喵喵",
                "type": 1,
                "fullday": 0,
                "start_at": "2018-08-17 19:06:00",
                "end_at": "2018-08-17 21:00:00",
                "remind_at": "2018-08-17 20:50:00"
            },
            {
                "id": 7,
                "name": "喵喵喵",
                "type": 1,
                "fullday": 0,
                "start_at": "2018-08-17 19:26:00",
                "end_at": "2018-08-17 21:00:00",
                "remind_at": "2018-09-07 20:50:00"
            },
            {
                "id": 8,
                "name": "喵喵喵",
                "type": 1,
                "fullday": 0,
                "start_at": "2018-08-17 19:26:00",
                "end_at": "2018-08-17 21:00:00",
                "remind_at": "2018-09-07 20:50:00"
            }
        ]
    }
}
```

### 根据日程ID获取详细信息

```
GET /schedule/detail/{id}
```

参数说明

| 名称              | 简介                         | 备注                       |
| ----------------- | ---------------------------- | -------------------------- |
| id             | 日程ID |  |

返回：

```json
{
    "errcode": 0,
    "errmsg": "ok",
    "errdata": {
        "data": [
            {
                "id": 6,
                "creater_id": 1,
                "user_id": 1,
                "type": 1,
                "name": "喵喵喵",
                "comment": "就分厘卡撒酒疯乐观精神多了开工建设大量",
                "start_at": "2018-08-17 19:06:00",
                "end_at": "2018-08-17 21:00:00",
                "remind_at": "2018-08-17 20:50:00",
                "public": 0,
                "created_at": "2018-09-07 18:02:34",
                "updated_at": "2018-09-07 18:17:14",
                "fullday": 0
            }
        ]
    }
}
```

### 根据日期获取当天的日程

```
GET /schedule/ymd/{ymd}
```

参数说明

| 名称              | 简介                         | 备注                       |
| ----------------- | ---------------------------- | -------------------------- |
| ymd             | 日期 | 格式为直接拼接不带分隔符的数字，如"20180907" |

返回：

```json
{
    "errcode": 0,
    "errmsg": "ok",
    "errdata": {
        "data": [
            {
                "id": 6,
                "name": "喵喵喵",
                "type": 1,
                "fullday": 0,
                "start_at": "2018-08-17 19:06:00",
                "end_at": "2018-08-17 21:00:00",
                "remind_at": "2018-08-17 20:50:00"
            },
            {
                "id": 7,
                "name": "喵喵喵",
                "type": 1,
                "fullday": 0,
                "start_at": "2018-08-17 19:26:00",
                "end_at": "2018-08-17 21:00:00",
                "remind_at": "2018-09-07 20:50:00"
            },
            {
                "id": 8,
                "name": "喵喵喵",
                "type": 1,
                "fullday": 0,
                "start_at": "2018-08-17 19:26:00",
                "end_at": "2018-08-17 21:00:00",
                "remind_at": "2018-09-07 20:50:00"
            }
        ]
    }
}
```

### 根据日期获取当天的提醒

```
GET /schedule/remind/ymd/{ymd}
```

参数说明

| 名称              | 简介                         | 备注                       |
| ----------------- | ---------------------------- | -------------------------- |
| ymd             | 日期 | 格式为直接拼接不带分隔符的数字，如"20180907" |

返回：

该接口返回的是任务和日程两者的并集，`type` 中的值用于区分两者，注意此处统一使用 `title` 作为标题段的名称，而其他情况下日程名称为 `name`。

```json
{
    "errcode": 0,
    "errmsg": "ok",
    "errdata": {
        "data": [
            {
                "type": "schedule",
                "time": "20:00",
                "id": 7,
                "title": "喵喵喵"
            },
            {
                "type": "schedule",
                "time": "20:00",
                "id": 8,
                "title": "喵喵喵"
            },
            {
                "type": "schedule",
                "time": "20:00",
                "id": 9,
                "title": "喵喵喵"
            }
        ]
    }
}
```

### 创建一条日程

```
POST /schedule/create
```

请求数据：

```json
{
    "type": 1,
    "name": "喵喵喵",
    "comment": "就分厘卡撒酒疯乐观精神多了开工建设大量",
    "start_at": "2018-08-17 19:26:00",
    "end_at": "2018-08-17 21:00:00",
    "remind_at": "2018-09-07 20:50:00",
    "public": 1,
    "fullday": 0
}
```

返回：

```json
{
    "errcode": 0,
    "errmsg": "ok",
    "errdata": {
        "data": "新增操作成功"
    }
}
```

### 更新一条日程

```
POST /schedule/update/{id}
```

参数说明

| 名称              | 简介                         | 备注                       |
| ----------------- | ---------------------------- | -------------------------- |
| id             | 日程编号（ID） |  |

请求数据：

```json
{
    "type": 1,
    "name": "喵喵喵",
    "comment": "就分厘卡撒酒疯乐观精神多了开工建设大量",
    "start_at": "2018-08-17 19:26:00",
    "end_at": "2018-08-17 21:00:00",
    "remind_at": "2018-09-07 20:50:00",
    "public": 1,
    "fullday": 0
}
```

返回：

```json
{
    "errcode": 0,
    "errmsg": "ok",
    "errdata": {
        "data": "更新操作成功"
    }
}
```

### 删除一条日程

```
GET /schedule/delete/{id}
```

参数说明

| 名称              | 简介                         | 备注                       |
| ----------------- | ---------------------------- | -------------------------- |
| id             | 日程编号（ID） |  |

返回：

```json
{
    "errcode": 0,
    "errmsg": "ok",
    "errdata": {
        "data": "删除操作成功"
    }
}
```

### 根据起止日期获取有提醒的日期列表

```
GET /schedule/eventdays/from/{from}/to/{to}
```

参数说明

左右均包含，即 `day >= from && day <= to`

| 名称              | 简介                         | 备注                       |
| ----------------- | ---------------------------- | -------------------------- |
| from             | 开始日期 | 包括自身，格式为直接拼接不带分隔符的数字，如"20180907" |
| to             | 截止日期 | 包括自身，格式为直接拼接不带分隔符的数字，如"20180907" |

返回：

```json
{
    "errcode": 0,
    "errmsg": "ok",
    "errdata": {
        "data": [
            "2018-08-17",
            "2018-09-07",
            "2018-09-03",
            "2018-09-01",
            "2018-08-11"
        ]
    }
}
```

# 异常

### 参数入参错误

response http code  422，errocde、errmsg 详见内容

### 授权错误

response http code  401，errocde、errmsg 详见内容

### 服务器错误

response http code  500，errocde、errmsg 详见内容
